# LLM Auto Optimizer Environment Configuration
# Copy this file to /etc/llm-optimizer/llm-optimizer.env and customize

# ============================================================================
# Service Configuration
# ============================================================================
OPTIMIZER_SERVICE__HOST=0.0.0.0
OPTIMIZER_SERVICE__PORT=8080
OPTIMIZER_SERVICE__MODE=standalone
OPTIMIZER_SERVICE__OPTIMIZATION_INTERVAL_SECS=900

# ============================================================================
# Database Configuration
# ============================================================================
# PostgreSQL connection string
# Format: postgres://username:password@host:port/database
OPTIMIZER_DATABASE__CONNECTION_STRING=postgres://optimizer:changeme@localhost:5432/optimizer
OPTIMIZER_DATABASE__MAX_CONNECTIONS=50
OPTIMIZER_DATABASE__TIMEOUT_SECS=30
OPTIMIZER_DATABASE__AUTO_MIGRATE=false

# ============================================================================
# Redis Configuration
# ============================================================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=changeme
REDIS_MAX_CONNECTIONS=20

# ============================================================================
# Kafka Configuration
# ============================================================================
KAFKA_BROKERS=localhost:9092
KAFKA_GROUP_ID=llm-optimizer
KAFKA_TOPIC_PREFIX=llm-optimizer

# ============================================================================
# Integration Endpoints
# ============================================================================
# LLM Observatory - Metrics collection
OPTIMIZER_INTEGRATIONS__OBSERVATORY_URL=http://localhost:4317

# LLM Orchestrator - Configuration management
OPTIMIZER_INTEGRATIONS__ORCHESTRATOR_URL=http://localhost:8080

# LLM Sentinel - Anomaly detection
OPTIMIZER_INTEGRATIONS__SENTINEL_KAFKA_BROKERS=localhost:9092

# LLM Governance - Policy enforcement
OPTIMIZER_INTEGRATIONS__GOVERNANCE_URL=http://localhost:8080

# LLM Registry - Model catalog
OPTIMIZER_INTEGRATIONS__REGISTRY_URL=http://localhost:8080

# ============================================================================
# Observability Configuration
# ============================================================================
RUST_LOG=info
RUST_BACKTRACE=0
OPTIMIZER_OBSERVABILITY__LOG_LEVEL=info
OPTIMIZER_OBSERVABILITY__JSON_LOGGING=true
OPTIMIZER_OBSERVABILITY__METRICS_ENDPOINT=http://localhost:9090/api/v1/write
OPTIMIZER_OBSERVABILITY__TRACES_ENDPOINT=http://localhost:14268/api/traces

# ============================================================================
# Strategy Configuration
# ============================================================================
# Threshold-based heuristics
OPTIMIZER_STRATEGIES__THRESHOLDS__LATENCY_P95_MS=5000.0
OPTIMIZER_STRATEGIES__THRESHOLDS__ERROR_RATE_PCT=5.0
OPTIMIZER_STRATEGIES__THRESHOLDS__COST_PER_REQUEST=0.10
OPTIMIZER_STRATEGIES__THRESHOLDS__QUALITY_SCORE_MIN=0.7

# A/B Testing
OPTIMIZER_STRATEGIES__AB_TESTING__MIN_SAMPLE_SIZE=1000
OPTIMIZER_STRATEGIES__AB_TESTING__SIGNIFICANCE_LEVEL=0.05

# Reinforcement Learning
OPTIMIZER_STRATEGIES__RL__LEARNING_RATE=0.1
OPTIMIZER_STRATEGIES__RL__EXPLORATION_RATE=0.1

# Cost-Performance
OPTIMIZER_STRATEGIES__COST_PERFORMANCE__MODE=balanced

# ============================================================================
# Security
# ============================================================================
# API Keys (if using authentication)
API_KEY=changeme
JWT_SECRET=changeme

# ============================================================================
# Feature Flags
# ============================================================================
ENABLE_AB_TESTING=true
ENABLE_RL_OPTIMIZATION=true
ENABLE_CANARY_DEPLOYMENTS=true
ENABLE_AUTO_ROLLBACK=true

# ============================================================================
# Performance Tuning
# ============================================================================
WORKER_THREADS=8
MAX_BLOCKING_THREADS=512
THREAD_STACK_SIZE=2097152

# ============================================================================
# Data Retention
# ============================================================================
METRICS_RETENTION_DAYS=30
EVENTS_RETENTION_DAYS=90
AUDIT_LOG_RETENTION_DAYS=365
